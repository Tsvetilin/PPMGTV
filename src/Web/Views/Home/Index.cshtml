@model HomeIndexViewModel
@{
    ViewData[TitleViewDataParam] = "Начало";
}

<div class="m-auto text-center">
    <img src="~/logo.png" alt="ППМГ ТВ Лого" />
    <h1 class="font-weight-bold d-none">
        ППМГ ТВ
    </h1>
    <h3>
        @SystemSlogan
    </h3>
</div>

<div class="row mb-5">
    <iframe id="video-frame"
            class="m-auto"
            src="@Model.VideoUrl"
            frameborder="0"
            allowfullscreen
            alt="ППМГ ТВ Сливен - най-ново видео"></iframe>
    <p class="m-3 lead">@Model.Title</p>
    <div class="w-100 ml-5">@Html.Raw(Model.Description)</div>
</div>
<div class="my-5">
    <hr />
</div>
@if (Model.Settings.IsHomePageNewsVisible && !string.IsNullOrWhiteSpace(Model.Settings.HomePageNewsSectionTitle))
{
    <h5 class="display-4 my-3 text-center">@Model.Settings.HomePageNewsSectionTitle</h5>
}
@if (Model.Settings.IsHomePageNewsVisible && !string.IsNullOrWhiteSpace(Model.Settings.HomePageNewsPreContent))
{
    <div class="m-3">@Html.Raw(Model.Settings.HomePageNewsPreContent)</div>
    <hr/>
}
@if (Model.Settings.IsHomePageLastGalleryVisible && Model.Gallery != null)
{
    <div class="my-5">
        <div class="w-100 mb-5 d-flex justify-content-center">
            <div class="col-md-10 col-sm-12">
                <div class="d-flex justify-content-center my-2">
                    <h2 class="text-center">@Model.Gallery.Title</h2>
                </div>
                @if (Model.Settings.IsHomePageGalleryPreTextVisible)
                {
                    <p class="mt-0 mb-3 text-center lead">@Model.Gallery.PreDescription</p>
                }
                <div id="carouselControls" class="carousel slide mb-3" data-ride="carousel" style="background-color:burlywood;">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img class="d-block mx-auto" style="max-height:85vh;" src="@Model.Gallery.ImagesUrls[0].TryGetOptimizedImageUrl()" alt="Slide 1 - ППМГ ТВ Сливен - @Model.Gallery.Title">
                        </div>
                        @for (int i = 1; i < Model.Gallery.ImagesUrls.Count; i++)
                        {
                            <div class="carousel-item">
                                @*img-fluid*@
                                <img class="d-block mx-auto" style="max-height:85vh;" src="@Model.Gallery.ImagesUrls[i].TryGetOptimizedImageUrl()" alt="Slide @(i + 1) - ППМГ ТВ Сливен - @Model.Gallery.Title">
                            </div>
                        }
                    </div>
                    <a class="carousel-control-prev" href="#carouselControls" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Предишен</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselControls" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Следващ</span>
                    </a>
                </div>
                @if (Model.Settings.IsHomePageGalleryPostTextVisible)
                {
                    <div class="m-0">
                        @Html.Raw(Model.Gallery.Description)
                    </div>
                }
                <div class="m-0">
                    <a asp-controller="Gallery" asp-action="Watch" asp-route-id="@Model.Gallery.Id" asp-route-slug="@Model.Gallery.Slug"
                       class="content-heading clearfix media text-decoration-none">
                        Преглед на всички снимки
                    </a>
                </div>
            </div>
        </div>
        <hr />
    </div>
}

@if (Model.Settings.IsHomePageNewsVisible && !string.IsNullOrWhiteSpace(Model.Settings.HomePageNewsContent))
{
    <div class="mx-5">
        @Html.Raw(Model.Settings.HomePageNewsContent)
    </div>
    <div class="my-5">
        <hr />
    </div>
}


<h3>За ППМГ ТВ</h3>
<div class="d-flex justify-content-center">
    <div class="my-5 col-md-8 col-12 sketchy">
        <h5 class="text-center">Мисия на ППМГ ТВ</h5>
        <div class="">
            <div style="text-align: justify">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;Ние сме млада и прохождаща, все още, училищна телевизия.</div>
            <div style="text-align: justify">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;Дейността на ППМГ ТВ – Сливен, която положи своите плахи първи стъпки през октомври 2019 г., е съвременна, атрактивна и забавна форма за изява на участниците, които трупат опит в правенето на телевизия.</div>
            <div style="text-align: justify">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;Мисията на ППМГ ТВ  е да направи живота в гимназията по-публичен, по-привлекателен и да го поддържа постоянно в крак с времето и събитията.</div>
            <div style="text-align: justify">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;ППМГ ТВ си поставя като основна задача да популяризира проекти, събития и инициативи, отличени учители и ученици, да се вглежда в злободневните теми и в такива, които предизвикват интерес у подрастващите и не на последно място да забавлява.</div>
            <div style="text-align: justify">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;Вместо само да споменаваме младите хора с добро или лошо, ние ще им помагаме да заснемат темите, които ги вълнуват от ежедневието им, от прочетеното от тях в книгите, списанията, сайтовете,  да споделят  проблемите, които ги вълнуват, като ще  насочим усилията си  към възпитание в дух на толерантност и морални ценности.</div>
            <div style="text-align: justify">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;На уебсайта на телевизията ще можете да намерите информация за важни моменти от дейността на телевизията, да се запознаете с екипа, да ни пишете и да участвате в нейния живот.</div>
            <div style="text-align: justify">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;Съвременните комуникации в училищното ежедневие вече са част от обучението и ние ще дадем възможност на всеки ученик да се изяви като репортер и оператор.</div>
            <div style="text-align: justify">&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;Ще се радваме да ни подкрепите и да бъдете част от нас.</div>
        </div>
    </div>
</div>

<div class="d-flex justify-content-center">
    <div align="center" class="mb-5 col-md-8">
        <h6 align="center">Студиото на ППМГ ТВ &darr;</h6>
        <iframe id="video-studio"
                src="https://www.youtube.com/embed/SaR-yGpJhew"
                frameborder="0"
                allowfullscreen
                alt="ППМГ ТВ Сливен - студио"
                class="w-100"></iframe>
    </div>
</div>


<p class="my-3">Официален YouTube канал на телевизията: <a href="https://www.youtube.com/channel/UCMb5RWFF9pdl5VzSpuc7bqw">youtube.com/c/ppmgtv</a></p>
<p class="my-3">Официален сайт на гимназията: <a href="http://pmg-sliven.com/">pmg-sliven.com</a></p>
<p class="my-3"><a asp-area="Identity" asp-page="/Account/Register">Регистрирайте се</a>, за да получавате известия при наличието на ново излъчване.</p>

<p class="mt-5 pt-4"><small> Училищна телевизия към ППМГ Сливен <span class="d-none">ППМГТВ / ППМГ ТВ</span></small></p>
<p class="d-none">School TV at PPMG Sliven - PPMGTV / PPMG TV</p>

@section Scripts {
    @{await Html.RenderPartialAsync("_FrameResizeScriptsParial");}
    @if (Model.Settings.IsHomePageLastGalleryVisible)
    {
        <script>
            function normalizeSlideHeights() {
                var maxH = 0.80 * document.documentElement.clientHeight;
                if (document.documentElement.clientWidth < document.documentElement.clientHeight) {
                    maxH = 10 * document.documentElement.clientWidth / 16;
                }
                console.log(maxH);
                $('.carousel').each(function () {
                    var items = $('img', this);
                    items.css('max-height', maxH + 'px');
                    items.css('min-height', maxH + 'px');
                });
            }

            $(window).on(
                'load resize orientationchange',
                normalizeSlideHeights);
        </script>
    }

    <script>
        var frame = document.getElementById("video-studio");

        recalculateFrame();

        window.onresize = recalculateFrame;

        function recalculateFrame() {
            frame.setAttribute("height", `${frame.clientWidth * 9 / 16}px`);
        }
    </script>
}
